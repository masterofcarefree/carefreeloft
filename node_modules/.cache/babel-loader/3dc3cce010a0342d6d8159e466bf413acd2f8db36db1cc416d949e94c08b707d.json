{"ast":null,"code":"var _jsxFileName = \"E:\\\\APPDevelop\\\\Projects\\\\Test\\\\src\\\\components\\\\VideoPlayer.js\",\n  _s = $RefreshSig$();\nimport React, { useRef, useEffect, useState } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction VideoPlayer({\n  video,\n  onSwipeUp,\n  onSwipeDown\n}) {\n  _s();\n  const videoRef = useRef(null);\n  const [startY, setStartY] = useState(null);\n  const [isPlaying, setIsPlaying] = useState(true);\n  const [isMuted, setIsMuted] = useState(false);\n  const [progress, setProgress] = useState(0);\n  useEffect(() => {\n    if (videoRef.current) {\n      videoRef.current.load();\n      videoRef.current.play().catch(error => console.log('视频自动播放失败:', error));\n    }\n  }, [video]);\n  const handleTouchStart = e => {\n    setStartY(e.touches[0].clientY);\n  };\n  const handleTouchMove = e => {\n    if (startY === null) return;\n    const currentY = e.touches[0].clientY;\n    const diffY = startY - currentY;\n    if (Math.abs(diffY) > 50) {\n      if (diffY > 0) {\n        onSwipeUp();\n      } else {\n        onSwipeDown();\n      }\n      setStartY(null);\n    }\n  };\n  const handleTouchEnd = () => {\n    setStartY(null);\n  };\n  const togglePlay = () => {\n    if (videoRef.current) {\n      if (isPlaying) {\n        videoRef.current.pause();\n      } else {\n        videoRef.current.play();\n      }\n      setIsPlaying(!isPlaying);\n    }\n  };\n  const toggleMute = () => {\n    if (videoRef.current) {\n      videoRef.current.muted = !isMuted;\n      setIsMuted(!isMuted);\n    }\n  };\n  const handleProgress = () => {\n    if (videoRef.current) {\n      const progress = videoRef.current.currentTime / videoRef.current.duration * 100;\n      setProgress(progress);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"video-player\",\n    onTouchStart: handleTouchStart,\n    onTouchMove: handleTouchMove,\n    onTouchEnd: handleTouchEnd,\n    children: [/*#__PURE__*/_jsxDEV(\"video\", {\n      ref: videoRef,\n      src: video.url,\n      autoPlay: true,\n      loop: true,\n      playsInline: true,\n      muted: isMuted,\n      onTimeUpdate: handleProgress\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"controls\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: togglePlay,\n        children: isPlaying ? '暂停' : '播放'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: toggleMute,\n        children: isMuted ? '取消静音' : '静音'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"progress-bar\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"progress\",\n          style: {\n            width: `${progress}%`\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 5\n  }, this);\n}\n_s(VideoPlayer, \"qPQF5QroMQXQL8nieXxjyf/OueE=\");\n_c = VideoPlayer;\nexport default VideoPlayer;\nvar _c;\n$RefreshReg$(_c, \"VideoPlayer\");","map":{"version":3,"names":["React","useRef","useEffect","useState","jsxDEV","_jsxDEV","VideoPlayer","video","onSwipeUp","onSwipeDown","_s","videoRef","startY","setStartY","isPlaying","setIsPlaying","isMuted","setIsMuted","progress","setProgress","current","load","play","catch","error","console","log","handleTouchStart","e","touches","clientY","handleTouchMove","currentY","diffY","Math","abs","handleTouchEnd","togglePlay","pause","toggleMute","muted","handleProgress","currentTime","duration","className","onTouchStart","onTouchMove","onTouchEnd","children","ref","src","url","autoPlay","loop","playsInline","onTimeUpdate","fileName","_jsxFileName","lineNumber","columnNumber","onClick","style","width","_c","$RefreshReg$"],"sources":["E:/APPDevelop/Projects/Test/src/components/VideoPlayer.js"],"sourcesContent":["import React, { useRef, useEffect, useState } from 'react';\r\n\r\nfunction VideoPlayer({ video, onSwipeUp, onSwipeDown }) {\r\n  const videoRef = useRef(null);\r\n  const [startY, setStartY] = useState(null);\r\n  const [isPlaying, setIsPlaying] = useState(true);\r\n  const [isMuted, setIsMuted] = useState(false);\r\n  const [progress, setProgress] = useState(0);\r\n\r\n  useEffect(() => {\r\n    if (videoRef.current) {\r\n      videoRef.current.load();\r\n      videoRef.current.play().catch(error => console.log('视频自动播放失败:', error));\r\n    }\r\n  }, [video]);\r\n\r\n  const handleTouchStart = (e) => {\r\n    setStartY(e.touches[0].clientY);\r\n  };\r\n\r\n  const handleTouchMove = (e) => {\r\n    if (startY === null) return;\r\n    \r\n    const currentY = e.touches[0].clientY;\r\n    const diffY = startY - currentY;\r\n\r\n    if (Math.abs(diffY) > 50) {\r\n      if (diffY > 0) {\r\n        onSwipeUp();\r\n      } else {\r\n        onSwipeDown();\r\n      }\r\n      setStartY(null);\r\n    }\r\n  };\r\n\r\n  const handleTouchEnd = () => {\r\n    setStartY(null);\r\n  };\r\n\r\n  const togglePlay = () => {\r\n    if (videoRef.current) {\r\n      if (isPlaying) {\r\n        videoRef.current.pause();\r\n      } else {\r\n        videoRef.current.play();\r\n      }\r\n      setIsPlaying(!isPlaying);\r\n    }\r\n  };\r\n\r\n  const toggleMute = () => {\r\n    if (videoRef.current) {\r\n      videoRef.current.muted = !isMuted;\r\n      setIsMuted(!isMuted);\r\n    }\r\n  };\r\n\r\n  const handleProgress = () => {\r\n    if (videoRef.current) {\r\n      const progress = (videoRef.current.currentTime / videoRef.current.duration) * 100;\r\n      setProgress(progress);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className=\"video-player\"\r\n      onTouchStart={handleTouchStart}\r\n      onTouchMove={handleTouchMove}\r\n      onTouchEnd={handleTouchEnd}\r\n    >\r\n      <video \r\n        ref={videoRef} \r\n        src={video.url} \r\n        autoPlay \r\n        loop \r\n        playsInline\r\n        muted={isMuted}\r\n        onTimeUpdate={handleProgress}\r\n      />\r\n      <div className=\"controls\">\r\n        <button onClick={togglePlay}>{isPlaying ? '暂停' : '播放'}</button>\r\n        <button onClick={toggleMute}>{isMuted ? '取消静音' : '静音'}</button>\r\n        <div className=\"progress-bar\">\r\n          <div className=\"progress\" style={{width: `${progress}%`}}></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default VideoPlayer;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}